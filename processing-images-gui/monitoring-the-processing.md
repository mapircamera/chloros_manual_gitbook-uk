# Моніторинг обробки

Після початку обробки Chloros надає кілька способів моніторингу прогресу, перевірки проблем та розуміння того, що відбувається з вашим набором даних. На цій сторінці пояснюється, як відстежувати обробку та інтерпретувати інформацію, яку надає Chloros.

## Огляд індикатора прогресу

Смуга прогресу у верхньому заголовку показує стан обробки в режимі реального часу та відсоток завершення.

### Смуга прогресу у вільному режимі

Для користувачів без ліцензії Chloros+:

**2-етапне відображення прогресу:**

1. **Виявлення цілі** — пошук калібрувальних цілей на зображеннях
2. **Обробка** — застосування корекцій та експорт

**Індикатор прогресу показує:**

* Загальний відсоток завершення (0-100%)
* Назва поточного етапу
* Проста візуалізація у вигляді горизонтальної смуги

### Індикатор прогресу Chloros+

Для користувачів з ліцензією Chloros+:

**4-етапне відображення прогресу:**

1. **Виявлення** - пошук калібрувальних мішеней
2. **Аналіз** - вивчення зображень і підготовка конвеєра
3. **Калібрування** - застосування корекцій віньєтки та відбиття
4. **Експорт** - збереження оброблених файлів

**Інтерактивні функції:**

* **Наведіть курсор на** індикатор прогресу, щоб побачити розгорнуту 4-етапну панель
* **Клацніть** на панелі прогресу, щоб зафіксувати/закріпити розгорнуту панель
* **Клацніть ще раз**, щоб скасувати фіксацію і автоматично приховати панель при відведенні миші
* Кожен етап показує індивідуальний прогрес (0-100%)

***

## Розуміння кожного етапу обробки

### Етап 1: Виявлення (виявлення цілей)

**Що відбувається:**

* Chloros сканує зображення, позначені прапорцем «Ціль»
* Алгоритми комп&#x27;ютерного зору ідентифікують 4 калібрувальні панелі
* З кожної панелі витягуються значення відбиття
* Записуються часові мітки цілей для правильного планування калібрування

**Тривалість:**

* З позначеними цілями: 10-60 секунд
* Без позначених цілей: 5-30+ хвилин (сканує всі зображення)

**Індикатор прогресу:**

* Виявлення: 0% → 100%
* Кількість відсканованих зображень
* Кількість знайдених цілей

**На що слід звернути увагу:**

* Процес повинен завершитися швидко, якщо цілі позначені належним чином
* Якщо процес триває занадто довго, цілі можуть бути не позначені
* Перевірте журнал налагодження на наявність повідомлень «Ціль знайдена»

### Етап 2: Аналіз

**Що відбувається:**

* Зчитування метаданих EXIF зображення (часові мітки, налаштування експозиції)
* Визначення стратегії калібрування на основі часових міток цілей
* Організація черги обробки зображень
* Підготовка паралельних процесорів (тільки Chloros+)

**Тривалість:** 5-30 секунд

**Індикатор прогресу:**

* Аналіз: 0% → 100%
* Швидкий етап, зазвичай завершується швидко

**На що слід звернути увагу:**

* Прогрес повинен бути стабільним, без пауз
* Попередження про відсутність метаданих з&#x27;являться в журналі налагодження

### Етап 3: Калібрування

**Що відбувається:**

* **Дебейринг**: перетворення RAW-матриці Байєра в 3 канали
* **Корекція віньєтування**: видалення затемнення країв об&#x27;єктива
* **Калібрування відбиття**: нормалізація за допомогою цільових значень
* **Розрахунок індексу**: обчислення мультиспектральних індексів
* Обробка кожного зображення за допомогою повного конвеєра

**Тривалість:** більша частина загального часу обробки (60-80%)

**Індикатор прогресу:**

* Калібрування: 0% → 100%
* Поточне зображення обробляється
* Зображення завершені / Загальна кількість зображень

**Поведінка обробки:**

* **Вільний режим**: Послідовна обробка одного зображення за раз
* **Режим Chloros+**: Одночасна обробка до 16 зображень
* **Прискорення за допомогою GPU**: значно прискорює цей етап

**На що слід звернути увагу:**

* Стабільний прогрес за кількістю зображень
* Перевірте журнал налагодження на наявність повідомлень про завершення обробки кожного зображення
* Попередження про проблеми з якістю зображення або калібруванням

### Етап 4: Експорт

**Що відбувається:**

* Запис відкаліброваних зображень на диск у вибраному форматі
* Експорт мультиспектральних індексних зображень із кольорами LUT
* Створення підпапок для моделей камер
* Збереження оригінальних імен файлів із відповідними суфіксами

**Тривалість:** 10–20 % від загального часу обробки

**Індикатор прогресу:**

* Експорт: 0 % → 100 %
* Файли записуються
* Формат експорту та місце призначення

**На що слід звернути увагу:**

* Попередження про місце на диску
* Помилки запису файлів
* Завершення всіх налаштованих виводів

***

## Вкладка «Журнал налагодження»

Журнал налагодження містить детальну інформацію про хід обробки та будь-які проблеми, що виникли.

### Доступ до журналу налагодження

1. Клацніть на піктограму **Журнал налагодження** <img src="../.gitbook/assets/icon_log.JPG" alt="" data-size="line"> на лівій бічній панелі
2. Відкриється панель журналу, що відображає повідомлення про обробку в режимі реального часу
3. Автоматичне прокручування для відображення останніх повідомлень

### Розуміння повідомлень журналу

#### Інформаційні повідомлення (білі/сірі)

Звичайні оновлення обробки:

```
[INFO] Processing started
[INFO] Target detected in IMG_0015.RAW - 4 panels found
[INFO] Calibrating IMG_0234.RAW
[INFO] Exported NDVI image: IMG_0234_NDVI.tif
[INFO] Processing complete
```

#### Попереджувальні повідомлення (жовті)

Некритичні проблеми, які не зупиняють обробку:

```
[WARN] No GPS data found in IMG_0145.RAW
[WARN] Target image timestamp gap > 30 minutes
[WARN] Low contrast in calibration panel - results may vary
```

**Дія:** Перегляньте попередження після обробки, але не переривайте її.

#### Повідомлення про помилки (Red)

Критичні проблеми, які можуть спричинити збій обробки:

```
[ERROR] Cannot write file - disk full
[ERROR] Corrupted image file: IMG_0299.RAW
[ERROR] No targets detected - enable reflectance calibration or mark target images
```

**Дія:** Припиніть обробку, усуньте помилку, перезапустіть.

### Загальні повідомлення журналу

| Повідомлення                          | Значення                                | Необхідні дії                                         |
| -------------------------------- | -------------------------------------- | ----------------------------------------------------- |
| «Ціль виявлена в \[ім&#x27;я файлу]» | Ціль калібрування успішно знайдена  | Немає — нормально                                         |
| «Обробка зображення X з Y»        | Оновлення поточного прогресу                | Немає — нормально                                         |
| «Цілі не знайдено»               | Цілі калібрування не виявлено        | Позначте зображення цілей або вимкніть калібрування відбиття |
| «Недостатньо місця на диску»        | Недостатньо місця для збереження вихідних даних          | Звільніть місце на диску                                    |
| «Пропускається пошкоджений файл»        | Файл зображення пошкоджено                  | Скопіюйте файл знову з SD-карти                             |
| «Застосовано дані PPK»               | Застосовано корекції GPS з файлу .daq | Нічого — нормально                                         |

### Копіювання даних журналу

Щоб скопіювати журнал для усунення несправностей або підтримки:

1. Відкрийте панель журналу налагодження.
2. Натисніть кнопку **«Копіювати журнал»** (або клацніть правою кнопкою миші → Вибрати все).
3. Вставте в текстовий файл або електронний лист.
4. Надішліть до служби підтримки MAPIR, якщо потрібно.

***

## Моніторинг системних ресурсів

### Використання процесора

**Вільний режим:**

* 1 ядро процесора на рівні ~100%
* Інші ядра не використовуються або доступні
* Система залишається чутливою

**Chloros+ Паралельний режим:**

* Кілька ядер на рівні 80-100% (до 16 ядер)
* Високе загальне використання процесора
* Система може відчуватися менш чутливою

**Для моніторингу:**

* Windows Диспетчер завдань (Ctrl+Shift+Esc)
* Вкладка «Продуктивність» → розділ «Процесор»
* Знайдіть процеси «Chloros» або «chloros-backend»

### Використання пам&#x27;яті (RAM)

**Типове використання:**

* Невеликі проекти (&lt; 100 зображень): 2-4 ГБ
* Середні проекти (100-500 зображень): 4-8 ГБ
* Великі проекти (500+ зображень): 8-16 ГБ
* Chloros+ паралельний режим використовує більше оперативної пам&#x27;яті

**Якщо пам&#x27;яті недостатньо:**

* Обробляйте менші партії
* Закрийте інші програми
* Оновіть оперативну пам&#x27;ять, якщо регулярно обробляєте великі набори даних

### Використання графічного процесора (Chloros+ з CUDA)

Коли ввімкнено прискорення графічного процесора:

* Графічний процесор NVIDIA показує високе використання (60-90%)
* Використання VRAM збільшується (потрібно 4 ГБ+ VRAM)
* Етап калібрування відбувається значно швидше

**Для моніторингу:**

* Піктограма NVIDIA в системному треї
* Диспетчер завдань → Продуктивність → GPU
* GPU-Z або подібний інструмент моніторингу

### Дисковий ввід-вивід

**Чого очікувати:**

* Висока швидкість читання диска на етапі аналізу
* Висока швидкість запису диска на етапі експорту
* SSD значно швидший за HDD

**Порада щодо продуктивності:**

* За можливості використовуйте SSD для папки проекту
* Уникайте мережевих дисків для великих наборів даних
* Переконайтеся, що диск не заповнений (це впливає на швидкість запису)

***

## Виявлення проблем під час обробки

### Ознаки

**Прогрес зупинився (немає змін протягом 5+ хвилин):**

* Перевірте журнал налагодження на наявність помилок
* Перевірте наявність вільного місця на диску
* Перевірте диспетчер завдань, щоб переконатися, що Chloros працює

**Часто з&#x27;являються повідомлення про помилки:**

* Зупиніть обробку та перегляньте помилки
* Поширені причини: місце на диску, пошкоджені файли, проблеми з пам&#x27;яттю
* Див. розділ «Усунення несправностей» нижче

**Система не реагує:**

* Chloros+ у паралельному режимі використовує занадто багато ресурсів
* Розгляньте можливість зменшення кількості одночасних завдань або оновлення апаратного забезпечення
* Вільний режим є менш ресурсоємним

### Коли зупиняти обробку

Зупиніть обробку, якщо ви бачите:

* ❌ Помилки «Диск заповнений» або «Неможливо записати файл»
* ❌ Повторні помилки пошкодження файлів зображень
* ❌ Система повністю зависла (не реагує)
* ❌ Виявлено неправильні налаштування
* ❌ Імпортовано неправильні зображення

**Як зупинити:**

1. Натисніть **кнопку «Зупинити/Скасувати»** (замінює кнопку «Пуск»)
2. Обробка зупиняється, прогрес втрачається
3. Виправте проблеми та почніть спочатку

***

## Усунення несправностей під час обробки

### Обробка відбувається дуже повільно

**Можливі причини:**

* Непозначені цільові зображення (сканування всіх зображень)
* HDD замість SSD-накопичувача
* Недостатні системні ресурси
* Налаштовано багато індексів
* Доступ до мережевого диска

**Рішення:**

1. Якщо тільки що розпочато і перебуваєте на етапі виявлення: скасуйте, позначте цілі, перезапустіть
2. На майбутнє: використовуйте SSD, зменшіть індекси, оновлюйте апаратне забезпечення
3. Розгляньте CLI для пакетної обробки великих наборів даних

### Попередження «Місце на диску»

**Рішення:**

1. Негайно звільніть місце на диску
2. Перемістіть проект на диск з більшим простором
3. Зменшіть кількість індексів для експорту.
4. Використовуйте формат JPG замість TIFF (менші файли).

### Часті повідомлення «Пошкоджений файл»

**Рішення:**

1. Перекопіюйте зображення з SD-карти, щоб забезпечити цілісність.
2. Перевірте SD-карту на наявність помилок.
3. Видаліть пошкоджені файли з проекту.
4. Продовжуйте обробку решти зображень.

### Перегрів/стримування системи

**Рішення:**

1. Забезпечте належну вентиляцію.
2. Очистіть вентиляційні отвори комп&#x27;ютера від пилу.
3. Зменште навантаження на обробку (використовуйте режим Free замість Chloros+).
4. Здійснюйте обробку в прохолодні години дня.

***

## Повідомлення про завершення обробки

Коли обробка завершиться:

* Смуга прогресу досягає 100%
* У журналі налагодження з&#x27;являється повідомлення **«Обробка завершена»**
* Кнопка «Пуск» знову стає активною
* Усі вихідні файли знаходяться в підпапці моделі камери

***

## Наступні кроки

Після завершення обробки:

1. **Перегляньте результати** - Див. [Завершення обробки](finishing-the-processing.md)
2. **Перевірте папку виводу** — переконайтеся, що всі файли експортовані правильно
3. **Перегляньте журнал налагодження** — перевірте, чи немає попереджень або помилок
4. **Перегляньте оброблені зображення** — використовуйте Image Viewer або зовнішнє програмне забезпечення

Інформацію про перегляд і використання оброблених результатів див. у розділі [Завершення обробки](finishing-the-processing.md).
