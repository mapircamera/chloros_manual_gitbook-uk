# Налаштування проекту

Налаштування проекту <img src="../.gitbook/assets/icon_project-settings.JPG" alt="" data-size="line"> у Chloros дозволяють налаштувати всі аспекти обробки зображень, виявлення калібрувальних мішеней, розрахунків мультиспектральних індексів та опцій експорту для вашого проекту. Ці налаштування зберігаються разом із вашим проектом і можуть бути збережені як шаблони для повторного використання в декількох проектах.

## Доступ до налаштувань проекту

Щоб отримати доступ до налаштувань проекту:

1. Відкрийте проект у Chloros
2. Клацніть вкладку **Налаштування проекту**  <img src="../.gitbook/assets/icon_project-settings.JPG" alt="" data-size="line"> на лівій бічній панелі
3. На панелі налаштувань будуть відображені всі доступні параметри конфігурації, упорядковані за категоріями

***

## Виявлення цілей

Ці налаштування контролюють, як Chloros виявляє та обробляє калібрувальні цілі на ваших зображеннях.

### Мінімальна площа калібрувального зразка (px)

* **Тип**: Число
* **Діапазон**: від 0 до 10 000 пікселів
* **За замовчуванням**: 25 пікселів
* **Опис**: встановлює мінімальну площу (у пікселях), необхідну для того, щоб виявлена область вважалася дійсною калібрувальною цільовою вибіркою. Менші значення дозволяють виявляти менші цілі, але можуть збільшити кількість помилкових спрацьовувань. Більші значення вимагають більших і чіткіших цільових областей для виявлення.
* **Коли коригувати**:
  * Збільшуйте, якщо ви отримуєте помилкові виявлення на невеликих артефактах зображення.
  * Зменшуйте, якщо ваші цілі калібрування виглядають невеликими на ваших зображеннях і не виявляються.

### Мінімальне групування цілей (0-100)

* **Тип**: Число
* **Діапазон**: від 0 до 100
* **За замовчуванням**: 60
* **Опис**: Контролює поріг кластеризації для групування областей схожого кольору під час виявлення цілей калібрування. Більші значення вимагають групування більш схожих кольорів, що призводить до більш консервативного виявлення цілей. Менші значення дозволяють більшу варіацію кольорів у межах групи цілей.
* **Коли регулювати**:
  * Збільшуйте, якщо цілі калібрування розділяються на кілька виявлень.
  * Зменшуйте, якщо цілі калібрування з варіацією кольорів не виявляються повністю.

***

## Обробка

Ці налаштування контролюють, як Chloros обробляє та калібрує ваші зображення.

### Корекція віньєтування

* **Тип**: прапорець
* **За замовчуванням**: увімкнено (позначено)
* **Опис**: застосовує корекцію віньєтування для компенсації затемнення об&#x27;єктива по краях зображень. Віньєтування — це поширене оптичне явище, при якому кути та краї зображення виглядають темнішими, ніж центр, через особливості об&#x27;єктива.
* **Коли вимкнути**: Вимикайте тільки в тому випадку, якщо ваша камера/об&#x27;єктив вже застосували корекцію віньєтування або якщо ви хочете вручну скорегувати віньєтування під час постобробки.

### Калібрування відбиття / баланс білого

* **Тип**: прапорець
* **За замовчуванням**: увімкнено (відмічено)
* **Опис**: Увімкнення автоматичного калібрування відбиття за допомогою виявлених калібрувальних мішеней у ваших зображеннях. Це нормалізує значення відбиття у вашому наборі даних і забезпечує послідовність вимірювань незалежно від умов освітлення.
* **Коли вимкнути**: Вимкніть тільки якщо ви хочете обробляти необроблені, некалібровані зображення або якщо ви використовуєте інший робочий процес калібрування.

### Метод дебайєризації

* **Тип**: Вибір із випадаючого меню
* **Опції**:
  * Висока якість (швидше) — наразі єдина доступна опція
* **За замовчуванням**: Висока якість (швидше)
* **Опис**: Вибирає алгоритм демозаїзації, який використовується для перетворення необроблених даних датчика за схемою Байєра у повнокольорові зображення. Метод «Висока якість (швидший)» забезпечує оптимальний баланс між швидкістю обробки та якістю зображення.
* **Примітка**: У майбутніх версіях Chloros можуть бути додані додаткові методи дебайєризації.

### Мінімальний інтервал повторної калібрування

* **Тип**: Число
* **Діапазон**: від 0 до 3600 секунд
* **За замовчуванням**: 0 секунд
* **Опис**: Встановлює мінімальний інтервал часу (у секундах) між використанням калібрувальних мішеней. Якщо встановлено значення 0, Chloros використовуватиме кожну виявлену калібрувальну мішень. Якщо встановлено вище значення, Chloros використовуватиме лише калібрувальні мішені, віддалені одна від одної щонайменше на цю кількість секунд, що скорочує час обробки наборів даних із частим захопленням калібрувальних мішеней.
* **Коли коригувати**:
  * Встановіть значення 0 для максимальної точності калібрування, коли умови освітлення змінюються.
  * Збільште (наприклад, до 60-300 секунд) для швидшої обробки, коли освітлення є стабільним і ви маєте часті зображення калібрувальних мішеней.

### Зсув часового поясу світлового датчика

* **Тип**: Число
* **Діапазон**: від -12 до +12 годин
* **За замовчуванням**: 0 годин
* **Опис**: Вказує зміщення часового поясу (у годинах від UTC) для часових міток даних датчика освітлення. Використовується під час обробки файлів даних PPK (Post-Processed Kinematic) для забезпечення правильної синхронізації часу між знімками та даними GPS.
* **Коли регулювати**: Встановіть це значення відповідно до зміщення вашого місцевого часового поясу, якщо ваші дані PPK використовують місцевий час замість UTC. Наприклад:
  * Тихоокеанський час: -8 або -7 (залежно від літнього часу)
  * Східний час: -5 або -4 (залежно від літнього часу)
  * Центральноєвропейський час: +1 або +2 (залежно від літнього часу)

### Застосувати корекції PPK

* **Тип**: прапорець
* **За замовчуванням**: вимкнено (не позначено)
* **Опис**: Уможливлює використання постоброблених кінематичних (PPK) корекцій із реєстраторів MAPIR DAQ, що містять GPS (GNSS). Якщо ця опція увімкнена, Chloros використовуватиме будь-які файли журналу .daq, що містять дані про контакти експозиції у вашому проектному каталозі, і застосовуватиме точні корекції геолокації до ваших зображень.
* **Вимога**: у каталозі вашого проекту повинен бути присутній файл журналу .daq із записами експозиційних контактів
* **Коли вмикати**: рекомендується завжди вмикати корекцію PPK, якщо у вашому файлі журналу .daq є записи зворотного зв&#x27;язку щодо експозиції.

### Контакт експозиції 1

* **Тип**: Вибір із випадаючого меню
* **Видимість**: Видно тільки коли увімкнено «Застосувати корекції PPK» І доступні дані експозиції для контакту 1
* **Опції**:
  * Назви моделей камер, виявлених у проекті
  * «Не використовувати» — ігнорувати цей контакт експозиції
* **За замовчуванням**: Автоматично вибирається на основі конфігурації проекту
* **Опис**: Призначає конкретну камеру до виходу експозиції 1 для синхронізації часу PPK. Вихід експозиції записує точний час спрацьовування затвора камери, що є критично важливим для точної геолокації PPK.
* **Поведінка автоматичного вибору**:
  * Одна камера + один вихід: Автоматично вибирає камеру
  * Одна камера + два контакти: контакт 1 автоматично призначається камері
  * Кілька камер: необхідний ручний вибір

### Контакт експозиції 2

* **Тип**: вибір із випадаючого меню
* **Видимість**: видно тільки тоді, коли ввімкнено «Застосувати корекції PPK» І доступні дані експозиції для контакту 2
* **Опції**:
  * Назви моделей камер, виявлених у проекті
  * «Не використовувати» — ігнорувати цей контакт експозиції
* **За замовчуванням**: автоматичний вибір на основі конфігурації проекту
* **Опис**: призначає конкретну камеру для контакту експозиції 2 для синхронізації часу PPK при використанні конфігурації з двома камерами.
* **Поведінка автоматичного вибору**:
  * Одна камера + один контакт: контакт 2 автоматично встановлюється на «Не використовувати»
  * Одна камера + два контакти: контакт 2 автоматично встановлюється на «Не використовувати»
  * Кілька камер: необхідний ручний вибір
* **Примітка**: одну і ту ж камеру не можна одночасно призначити для контакту 1 і контакту 2.

***

## Індекс

Ці налаштування дозволяють конфігурувати мультиспектральні індекси для аналізу та візуалізації.

### Додати індекс

* **Тип**: Спеціальна панель налаштування індексу
* **Опис**: Відкриває інтерактивну панель, де ви можете вибрати та налаштувати мультиспектральні індекси рослинності (NDVI, NDRE, EVI тощо) для обчислення під час обробки зображень. Ви можете додати кілька індексів, кожен із власними налаштуваннями візуалізації.
* **Доступні індекси**: Система включає понад 30 попередньо визначених мультиспектральних індексів, зокрема:
  * NDVI (нормалізований різницевий індекс рослинності)
  * NDRE (нормалізована різниця RedEdge)
  * EVI (розширений індекс рослинності)
  * GNDVI, SAVI, OSAVI, MSAVI2
  * І багато іншого (повний перелік див. [Формули мультиспектральних індексів](multispectral-index-formulas.md))
* **Функції**:
  * Вибір із заздалегідь визначених формул індексів
  * Налаштування градієнтів кольорів візуалізації (LUT — таблиці перегляду)
  * Встановлення порогових значень для аналізу
  * Створення власних формул індексів

### Власні формули (функція Chloros+)

* **Тип**: Масив визначень власних формул
* **Опис**: Дозволяє створювати та зберігати власні формули мультиспектрального індексу за допомогою математичних операцій з діапазонами. Власні формули зберігаються разом із налаштуваннями проекту і можуть використовуватися так само, як і вбудовані індекси.
* **Як створити**:
  1. У панелі налаштувань індексу знайдіть опцію власної формули
  2. Визначте свою формулу, використовуючи ідентифікатори смуг (наприклад, NIR, Red, Green, Blue)
  3. Збережіть формулу під описовою назвою
* **Синтаксис формули**: Підтримуються стандартні математичні операції, зокрема:
* Арифметика: `+`, `-`, `*`, `/`
* Дужки для порядку операцій
  * Посилання на діапазони: NIR, Red, Green, Blue, RedEdge, Cyan, Orange, NIR1, NIR2

***

## Експорт

Ці налаштування контролюють формат і якість експортованих оброблених зображень.

### Калібрований формат зображення

* **Тип**: Вибір із випадаючого меню
* **Опції**:
  * **TIFF (16-біт)** - Нестиснений 16-бітний формат TIFF
  * **TIFF (32-бітний, відсоток)** — 32-бітний TIFF з плаваючою комою та значеннями відбиття у відсотках
  * **PNG (8-біт)** - Стислий 8-бітний формат PNG
  * **JPG (8-біт)** - Стислий 8-бітний формат JPEG
* **За замовчуванням**: TIFF (16-біт)
* **Опис**: Вибір формату файлу для збереження оброблених і відкаліброваних зображень.
* **Рекомендації щодо формату**:
  * **TIFF (16-біт)**: Рекомендується для наукового аналізу та професійних робочих процесів. Зберігає максимальну якість даних без артефактів стиснення. Найкраще підходить для мультиспектрального аналізу та подальшої обробки в програмному забезпеченні GIS.
  * **TIFF (32-біт, відсоток)**: Найкраще підходить для робочих процесів, які вимагають значень відбиття у відсотках (0-100%). Забезпечує максимальну точність радіометричних вимірювань.
  * **PNG (8-біт)**: Підходить для перегляду в Інтернеті та загальної візуалізації. Менший розмір файлів із безвтратним стисненням, але зменшений динамічний діапазон.
  * **JPG (8-біт)**: Найменший розмір файлів, найкраще підходить лише для попереднього перегляду та відображення в Інтернеті. Використовує стиснення з втратами, яке не підходить для наукового аналізу.

***

## Зберегти шаблон проекту

Ця функція дозволяє зберегти поточні налаштування проекту як шаблон, який можна використовувати повторно.

* **Тип**: Введення тексту + кнопка «Зберегти»
* **Опис**: Введіть описову назву для шаблону налаштувань і натисніть піктограму «Зберегти». Шаблон збереже всі поточні налаштування проекту (виявлення цілі, параметри обробки, індекси та формат експорту) для зручного повторного використання в майбутніх проектах.
* **Приклади використання**:
  * Створення шаблонів для різних систем камер (RGB, мультиспектральна, NIR)
  * Збереження стандартних конфігурацій для конкретних типів культур або робочих процесів аналізу
  * Спільне використання однакових налаштувань у команді
* **Як використовувати**:
  1. Налаштуйте всі бажані параметри проекту
  2. Введіть назву шаблону (наприклад, «RedEdge Survey3 NDVI Стандартний»)
  3. Натисніть піктограму збереження
  4. Тепер шаблон можна завантажити під час створення нових проектів

***

## Папка збереження проекту

Цей параметр визначає, де за замовчуванням зберігаються нові проекти.

* **Тип**: Відображення шляху до каталогу + кнопка «Редагувати»
* **За замовчуванням**: `C:\Users\[Username]\Chloros Projects`
* **Опис**: Показує поточний каталог за замовчуванням, де створюються нові проекти Chloros. Натисніть піктограму редагування, щоб вибрати інший каталог.
* **Коли змінювати**:
  * Встановіть мережевий диск для спільної роботи команди.
  * Змініть на диск з більшим об&#x27;ємом пам&#x27;яті для великих наборів даних.
  * Організуйте проекти за роком, клієнтом або типом проекту в різних папках.
* **Примітка**: Зміна цього параметра впливає тільки на НОВІ проекти. Існуючі проекти залишаються у своїх початкових місцях.

***

## Збереження налаштувань

Усі налаштування проекту автоматично зберігаються разом із файлом проекту (формат проекту `.mapir`). Коли ви знову відкриваєте проект, усі налаштування відновлюються саме так, як ви їх залишили.

### Ієрархія налаштувань

Налаштування застосовуються в такому порядку:

1. **Системні налаштування за замовчуванням** — вбудовані налаштування за замовчуванням, визначені Chloros
2. **Налаштування шаблону** — якщо ви завантажуєте шаблон під час створення проекту
3. **Збережені налаштування проекту** — налаштування, збережені разом із файлом проекту
4. **Ручні налаштування** — будь-які зміни, які ви вносите під час поточної сесії

### Налаштування та обробка зображень

Більшість змін налаштувань (особливо в категоріях «Обробка» та «Експорт») спричиняють повторну обробку зображень для відображення нових налаштувань. Однак деякі налаштування є «тільки для експорту» і не вимагають негайної повторної обробки:

* Зберегти шаблон проекту
* Робоча директорія
* Калібрований формат зображення (застосовується під час експорту)

***

## Найкращі практики

1. **Почніть із стандартних налаштувань**: стандартні налаштування добре працюють для більшості систем камер MAPIR і типових робочих процесів.
2. **Створіть шаблони**: Після оптимізації налаштувань для конкретного робочого процесу або камери збережіть їх як шаблон, щоб забезпечити узгодженість між проектами.
3. **Виконайте тестування перед повним обробленням**: експериментуючи з новими налаштуваннями, протестуйте їх на невеликій підмножині зображень, перш ніж обробляти весь набір даних.
4. **Документуйте свої налаштування**: використовуйте описові назви шаблонів, що вказують на систему камер, тип обробки та передбачуване використання (наприклад, «Survey3\_RGB\_NDVI\_Agriculture»).
5. **Вибір формату експорту**: виберіть формат експорту відповідно до кінцевого використання:
   * Науковий аналіз → TIFF (16-бітний або 32-бітний)
   * Обробка ГІС → TIFF (16-бітний)
   * Швидка візуалізація → PNG (8-бітний)
   * Спільний доступ в Інтернеті → JPG (8-бітний)

***

Для отримання додаткової інформації про мультиспектральні індекси в Chloros див. сторінку [Формули мультиспектральних індексів](multispectral-index-formulas.md).
